ng g i shared/interfaces/blog-post

ng g s core/services/blog

ng g c features/blog/pages/post-form --standalone --skip-import

ng g c features/blog/pages/posts-list --standalone --skip-import

blog-post.interface
export interface BlogPost {
  id: string;
  title: string;
  content: string;
  raceSessionKey: string;
  createdAt: Date;
  author: string;
  excerpt?: string;
}

test-utils.ts
export function createMockPost(overrides = {}) {
  return {
    id: 'id_' + Math.random().toString(36).slice(2),
    title: 'Título de teste',
    content: 'Conteúdo '.repeat(10),
    raceSessionKey: '100',
    author: 'Autor Teste',
    createdAt: new Date(),
    ...overrides
  };
}

post-form.spec
const mockF1ApiService = {
  getSessions: jest.fn().mockReturnValue(of([
    { session_key: '100', session_type: 'Race', circuit_short_name: 'GP', date_start: '2025-03-10T00:00:00Z' }
  ]))
};

  const mockBlogService = {
    existsTitleInRace: jest.fn().mockReturnValue(false),
    createPost: jest.fn(),
    updatePost: jest.fn(),
    getPost: jest.fn()
  };

posts-list.spec
  const mockF1ApiService = {
    getSessions: jest.fn().mockReturnValue(of([
      { session_key: '100', session_type: 'Race', circuit_short_name: 'GP' }
    ]))
  };

  const mockPosts = [
    createMockPost({ title: 'A' , raceSessionKey: '100' }),
    createMockPost({ title: 'B', raceSessionKey: '200' })
  ];

  const mockBlogService = {
    posts: signal(mockPosts),
    sortedPosts: signal(mockPosts),
    deletePost: jest.fn(),
    getPost: jest.fn()
  };

package.json
{
  "scripts": {
    "test:blog:service": "jest, src/app/core/services/blog.service.spec.ts",
    "test:blog:components": "jest src/app/features/blog/pages/",
    "test:blog:coverage": "jest src/app/features/blog/ src/app/core/services/blog.service.spec.ts --coverage",
    "test:blog:all": "npm run test:blog:service && npm run test:blog:components"
  }
}
